<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ножейная</title>
    <link rel="stylesheet" href="style.css">
</head>

<body class="page">
    <header class="page__header">
        <div class="burger" id="burger">
            <div class="burger__line"></div>
            <div class="burger__line"></div>
            <div class="burger__line"></div>
        </div>
        <nav class="menu" id="menu">
            <!-- <a href="#portfolio" class="menu__link">Портфолио</a> -->
            <!-- <a href="#delivery" class="menu__link">Доставка</a> -->
            <!-- <a href="#contacts" class="menu__link">Контакты</a> -->
        </nav>
        <div class="logo">
            <img draggable="false" src="./images/logo-shark.jpg" class="logo__img" alt="Логотип Ножейная">
            <h1 class="logo__title">Ножейная</h1>
        </div>

    </header>
    <script>
        let isAnimating = false;
        const icon = document.querySelector(".logo__img");
        icon.addEventListener("click", function () {
            if (isAnimating) return;
            isAnimating = true;
            icon.classList.remove("logo__img--spin");
            void icon.offsetWidth;
            icon.classList.add("logo__img--spin");
        })
        icon.addEventListener('animationend', () => {
            isAnimating = false;
        });
    </script>
    <script>
        const burger = document.getElementById('burger');
        const menu = document.getElementById('menu');

        function openMenu() {
            menu.classList.add('menu--open');
        }

        function closeMenu() {
            menu.classList.remove('menu--open');
        }

        burger.addEventListener('click', (e) => {
            e.stopPropagation();      // чтобы клик по бургеру не считался «вне»
            openMenu();
        });

        document.addEventListener('click', (event) => {
            const clickInsideMenu = menu.contains(event.target) || burger.contains(event.target);

            if (!clickInsideMenu) {
                // кликнули вне меню и не по бургеру
                closeMenu();
            }
        });

    </script>
    <section class="page__hero hero">
        <img class="hero__img" src="" alt="">
        <h2 class="hero__title">Надёжные ножи на каждый день</h2>
        <!-- <h2 class="hero__title">Ножи ручной работы на заказ в Санкт-Петербурге</h2> -->
        <p class="hero__subtitle">Надёжные наяищим каждый дегем</p>
        <!-- <p class="hero__subtitle">Каждый нож по индивидуальному заказу</p> -->
        <button class="hero__button">Купить</button>
        <!-- <button class="hero__button">Заказать нож</button> -->
        <!-- <button class="hero__button">Оставить заявку</button> -->

    </section>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // твой код, который должен ждать разметку
            const btn = document.querySelector('.hero__button');

            const target = document.getElementById('order__title');

            btn.addEventListener('click', () => {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start',
                });
            });

        });
    </script>
    <section class="portfolio">
        <h2 class="portfolio__title">Реальные ножи, которые я сделал</h2>
        <div class="slider">
            <div class="slider__track">
                <div class="knife slider__slide">
                    <img src="images/bg-tactical-knife.png" alt="Нож сделанный мною" class="knife__img">
                    <div class="knife__details">
                        <h3 class="knife__title">Походный нож "Taika"</h3>
                        <p class="knife__subtitle">Из качественной стали</p>
                    </div>
                </div>
                <div class="knife slider__slide">
                    <img src="images/bg-tactical-knife.png" alt="Нож сделанный мною" class="knife__img">
                    <div class="knife__details">
                        <h3 class="knife__title">Кухонный нож "Шэф"</h3>
                        <p class="knife__subtitle">Высокая твердость и износостойкость режущей кромки</p>
                    </div>
                </div>
                <div class="knife slider__slide">
                    <img src="images/bg-tactical-knife.png" alt="Нож сделанный мною" class="knife__img">
                    <div class="knife__details">
                        <h3 class="knife__title">Финка "Сканди"</h3>
                        <p class="knife__subtitle">Надежное нескользящее хваткое покрытие рукояти</p>
                    </div>
                </div>
                <div class="knife slider__slide">
                    <img src="images/bg-tactical-knife.png" alt="Нож сделанный мною" class="knife__img">
                    <div class="knife__details">
                        <h3 class="knife__title">Походный нож "Taika"</h3>
                        <p class="knife__subtitle">Из качественной стали</p>
                    </div>
                </div>
                <div class="knife slider__slide">
                    <img src="images/bg-tactical-knife.png" alt="Нож сделанный мною" class="knife__img">
                    <div class="knife__details">
                        <h3 class="knife__title">Кухонный нож "Шэф"</h3>
                        <p class="knife__subtitle">Высокая твердость и износостойкость режущей кромки</p>
                    </div>
                </div>
                <div class="knife slider__slide">
                    <img src="images/bg-tactical-knife.png" alt="Нож сделанный мною" class="knife__img">
                    <div class="knife__details">
                        <h3 class="knife__title">Финка "Сканди"</h3>
                        <p class="knife__subtitle">Надежное нескользящее хваткое покрытие рукояти</p>
                    </div>
                </div>
               
                <div class="knife slider__slide">
                    <img src="images/bg-tactical-knife.png" alt="Нож сделанный мною" class="knife__img">
                    <div class="knife__details">
                        <h3 class="knife__title">Складной нож "Buck"</h3>
                        <p class="knife__subtitle">Долго держит заточку</p>
                    </div>
                </div>
            </div>
            <div class="slider__dots">
                <!-- <div class="slider__dot"></div> -->
                <!-- <div class="slider__dot slider__dot--active"></div> -->
                <!-- <div class="slider__dot"></div> -->
                <!-- <div class="slider__dot"></div> -->
            </div>
            <button class="slider__button slider__button--prev">prev</button>
            <button class="slider__button slider__button--next">next</button>
            <!-- <button class="portfolio__button">Заказать</button> -->
        </div>
    </section>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const track = document.querySelector('.slider__track');
            const slides = Array.from(document.querySelectorAll('.slider__slide'));
            const prevBtn = document.querySelector('.slider__button--prev');
            const nextBtn = document.querySelector('.slider__button--next');

            const slidesToShow = 2;      // видно 2
            const step = 100 / slidesToShow; // один шаг = 50%
            let index = 1;               // левый видимый

            const dotsContainer = document.querySelector('.slider__dots');


            // создаём точки
            slides.forEach((_, indexFE) => {
                const dot = document.createElement('button');
                dot.classList.add('slider__dot');
                if (indexFE === index) dot.classList.add('slider__dot--active');

                dot.addEventListener('click', () => {
                    index = indexFE;
                    updateSlider();
                });
                if (indexFE !== slides.length - 1) {
                    dotsContainer.appendChild(dot);
                }
            });

            const dots = Array.from(document.querySelectorAll('.slider__dot'));

            function updateSlider() {
                // максимум: так, чтобы справа ещё было место хотя бы под один слайд
                const maxIndex = slides.length - slidesToShow;
                // if (index < 0) index = 0;
                if (index < 0) index = maxIndex;
                // if (index > maxIndex) index = maxIndex;
                if (index > maxIndex) index = 0;

                const offset = -index * step;
                track.style.transform = `translateX(${offset}%)`;

                dots.forEach(dot => dot.classList.remove('slider__dot--active'));
                dots[index].classList.add('slider__dot--active');
            }


            nextBtn.addEventListener('click', () => {
                index += 1;        // двигаем на один слайд
                updateSlider();
            });

            prevBtn.addEventListener('click', () => {
                index -= 1;
                updateSlider();
            });

            updateSlider();

            // СВАЙП
            const slider = document.querySelector('.slider');
            let startX = null;

            slider.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
            });

            slider.addEventListener('touchend', (e) => {
                if (startX === null) return;

                const endX = e.changedTouches[0].clientX;
                const diff = startX - endX;
                const threshold = 50; // минимальный свайп

                if (diff > threshold) {
                    // свайп влево → следующий
                    // goToNextSlide();
                    index += 1;        // двигаем на один слайд
                    updateSlider();
                    pauseAutoplayFor(5000);
                } else if (diff < -threshold) {
                    // свайп вправо → предыдущий
                    // goToPrevSlide();
                    index -= 1;        // двигаем на один слайд
                    updateSlider();
                    pauseAutoplayFor(5000);
                }

                startX = null;
            });

            // АВТОПЛЕЙ
            let autoplayId = null;

            function startAutoplay() {
                // чтобы не создать два интервала
                if (autoplayId !== null) return;

                autoplayId = setInterval(() => {
                    index += 1;
                    updateSlider();
                    // goToNextSlide(); // твоя функция переключения
                }, 3000); // каждые 3 секунды
            }

            function stopAutoplay() {
                clearInterval(autoplayId);
                autoplayId = null;
            }

            // ПАУЗА
            let resumeTimeoutId = null;

            function pauseAutoplayFor(ms) {
                stopAutoplay();            // сразу остановили

                clearTimeout(resumeTimeoutId); // если уже был таймер — сбрасываем
                resumeTimeoutId = setTimeout(() => {
                    startAutoplay();         // через ms снова запустим
                }, ms);
            }

            startAutoplay();
        })
    </script>
    <section class="delivery">
        <h2 class="delivery__title">Удобная доставка по России</h2>
        <p class="delivery__subtitle">Мы отправляем заказы через популярные службы Ozon и СДЭК</p>
        <div class="delivery__delivery-cards">
            <div class="delivery__delivery-card delivery-card">
                <h3 class="delivery-card__title delivery-card__title--ozon">Ozon</h3>
                <div class="delivery-card__benefits">
                    <p class="delivery-card__benefit">Отправка по России</p>
                    <div class="delivery-card__horizontal"></div>
                    <p class="delivery-card__benefit">Отсылает любые посылки</p>
                </div>
            </div>
            <div class="delivery__delivery-card delivery-card">
                <h3 class="delivery-card__title delivery-card__title--sdek">СДЭК</h3>
                <div class="delivery-card__benefits">
                    <p class="delivery-card__benefit">Отслеживание посылки</p>
                    <div class="delivery-card__horizontal"></div>
                    <p class="delivery-card__benefit">Быстрая доставка</p>
                </div>
            </div>
        </div>
        <p class="delivery__note">Сроки и стоимость доставки рассчитываются индивидуально</p>
        <button class="delivery__button">Узнать о доставке</button>
    </section>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // твой код, который должен ждать разметку
            const btn = document.querySelector('.delivery__button');

            const target = document.getElementById('order__title');

            btn.addEventListener('click', () => {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start',
                });
            });

        });
    </script>
    <section class="order" id="order">
        <div class="order__title" id="order__title">Заявка</div>
        <div class="order__subtitle" id="order__subtitle">Заказать нож</div>
        <form class="order__form">
            <label class="order__label">
                Имя
                <input placeholder="Иван Иванов" type="text" class="order__input">
            </label>
            <label class="order__label">
                Телефон
                <input id="order__phone" placeholder="8-888-888-88-88" type="tel" maxlength="15" class="order__input">
            </label>

            <label class="order__label">
                Почта
                <input placeholder="Ivanov@mail.ru" type="email" class="order__input">
            </label>
            <label class="order__label order__label--textarea" for="">
                Комментарий
                <textarea placeholder="Опишите, какой нож нужен" type="text"
                    class="order__input order__input--textarea"></textarea>
            </label>
            <button class="order__submit-button" type="submit">Отправить</button>
            <p class="order__note">Нажимая "Отправить", Вы соглашаетесь с обработкой данных</p>
        </form>
    </section>
    <script>
        // СКРИПТ ДЛЯ НОМЕРА ТЕЛЕФОНА
        const phoneInput = document.getElementById('order__phone');

        phoneInput.addEventListener('input', () => {
            let value = phoneInput.value.replace(/\D/g, ''); // только цифры

            // обрезаем лишнее
            value = value.slice(0, 11);

            let result = '';

            if (value.length > 0) {
                result += value.slice(0, 1);               // 8
            }
            if (value.length >= 2) {
                result += '-' + value.slice(1, 4);         // 800
            }
            if (value.length >= 5) {
                result += '-' + value.slice(4, 7);         // 888
            }
            if (value.length >= 8) {
                result += '-' + value.slice(7, 9);         // 88
            }
            if (value.length >= 10) {
                result += '-' + value.slice(9, 11);        // 88
            }

            phoneInput.value = result;
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // твой код, который должен ждать разметку
            const btn = document.querySelector('.order__submit-button');

            btn.addEventListener('click', (event) => {
                event.preventDefault();
                alert("Спасибо за заказ!")
            });

        });
    </script>
    <footer class="footer">
        <div class="footer__horizontal"></div>
        <div class="footer__container">
            <div class="footer__contacts">
                <a class="footer__phone" href="tel:+78008008888">Тел: 8 800 800 88 88</a>
            </div>
            <div class="footer__social">
                <a class="footer__social-link" href="#">
                    <!-- <img src="" class="footer__social-icon" alt="Мы в Вконтакте"> -->
                    <img src="" class="footer__social-icon" alt="">
                    <span class="footer__social-title">Вконтакте</span>
                </a>
                <a class="footer__social-link" href="#">
                    <!-- <img src="" class="footer__social-icon" alt="Мы в телеграм"> -->
                    <img src="" class="footer__social-icon" alt="">
                    <span class="footer__social-title">Telegram</span>
                </a>
            </div>
        </div>
    </footer>
    <div>
        <div class="search"></div>
        <!-- <img class="pixel-perfect-image" src="./images/layout-header-hero.png" alt=""> -->
        <!-- <img class="pixel-perfect-image" src="./images/layout-portfolio.png" alt=""> -->
        <!-- <img class="pixel-perfect-image pixel-perfect-image--delivery" src="./images/layout-delivery.png" alt=""> -->
        <!-- <img class="pixel-perfect-image pixel-perfect-image--footer" src="./images/layout--footer.png" alt=""> -->
        <!-- <img class="pixel-perfect-image pixel-perfect-image--form" src="./layout-images/layout--form.png" alt=""> -->
        <!-- <button id="pixel-perfect-toggle">Вкл/Выкл</button> -->
        <script>
            const btn = document.getElementById('pixel-perfect-toggle');
            const overlay = document.querySelector('.pixel-perfect-image');


            btn.addEventListener('click', () => {
                overlay.classList.toggle('is-hidden');
            });
        </script>
    </div>
</body>

</html>